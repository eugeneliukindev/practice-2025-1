# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –ü–∞–ø–∫–∞ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –ø—Ä–∞–∫—Ç–∏–∫–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown.
- README.md ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫–∏.
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã Markdown.

–û—Ç—á–µ—Ç –æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏
–¢–µ–º–∞: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Telegram-–±–æ—Ç–∞ –Ω–∞ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ Aiogram

1. –í–≤–µ–¥–µ–Ω–∏–µ
   –í —Ö–æ–¥–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –±—ã–ª–∞ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω Telegram-–±–æ—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ
   –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Aiogram 3.x. –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞:

- –°–Ω–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –Ω–∞—á–∞–ª—å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –Ω–æ–≤—ã—Ö –±–æ—Ç–æ–≤

- –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

2. –≠—Ç–∞–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.12 –≤–µ—Ä—Å–∏–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ —Å –ø–æ–º–æ—â—å—é Poetry
- –ü–æ–¥–∫–ª—é—á–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```toml
[tool.poetry.dependencies]
aiogram = "^3.0"
sqlalchemy = "^2.0"
redis = "^4.5"
pydantic = "^2.0"
...
```
3. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
üì¶ project-root
‚îú‚îÄ‚îÄ üìÇ app
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ core
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ models
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ mixins
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ schemas
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ handlers
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ middlewares
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ repository
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ utils
‚îú‚îÄ‚îÄ üìÇ docs
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ images
‚îú‚îÄ‚îÄ üìÇ migrations
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ versions
‚îú‚îÄ‚îÄ üìÇ scripts
‚îú‚îÄ‚îÄ üìÇ tests
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ integration_tests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÇ mock_data
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ test_handlers
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ unit_tests
‚îî‚îÄ‚îÄ üìÇ texts
```
4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

```python
from aiogram import Bot, Dispatcher

async def main():
    bot = Bot(token=config.TOKEN)
    dp = Dispatcher()
    await dp.start_polling(bot)
...
```

5. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã ORM –º–æ–¥–µ–ª–∏ SQLAlchemy –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î:
```python
from sqlalchemy import BigInteger
from sqlalchemy.orm import Mapped, mapped_column

class UserOrm(BaseOrm):
    __tablename__ = 'users'
    id: Mapped[int] = mapped_column(primary_key=True)
    tg_id: Mapped[int] = mapped_column(BigInteger, unique=True)
...
```
6. –°–æ–∑–¥–∞–Ω –ø–∞—Ç—Ç–µ—Ä–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î:
```python
class UserRepository(BaseRepository):
    model_class: type[UserOrm] = UserOrm

    @classmethod
    async def get_by_tg_id(cls, session: AsyncSession, tg_id: int) -> UserOrm | None:
        scalar_result: ScalarResult[UserOrm] = await cls._get_by_fields(session=session, tg_id=tg_id)
        user: UserOrm | None = scalar_result.one_or_none()
        return user
...
```
7. –°–æ–∑–¥–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É /start
```python
from aiogram import Router
from aiogram.filters import CommandStart
from aiogram.types import Message
from app.repository.user import UserRepository
from sqlalchemy.ext.asyncio import AsyncSession


@router.message(CommandStart())
async def command_start_handler(message: Message, session: AsyncSession) -> None:
   if await UserRepository.get_by_tg_id(session=session, tg_id=message.from_user.id):
      await message.reply("already_registered")
      return
   )
   await UserRepository.create(
      session = session,
      tg_id = message.from_user.id,
      username = message.from_user.username,
      first_name = message.from_user.first_name,
      last_name = message.from_user.last_name,
   )
   await message.reply(f"Welcome {message.from_user.full_name}!")
...
```
8. –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

## –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:

- –û—Å–≤–æ–µ–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ Telegram-–±–æ—Ç–æ–≤
- –ü—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏ ORM
- –°–æ–∑–¥–∞–Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤